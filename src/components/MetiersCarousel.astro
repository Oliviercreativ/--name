---
// src/components/MetiersCarousel.astro
// Composant carousel pour la section m√©tiers
---

<section id="metiers" class="bg-white py-20 lg:py-32">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                Adapt√© √† <span class="gradient-text">votre m√©tier</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
                Templates sp√©cialis√©s avec fonctionnalit√©s m√©tier int√©gr√©es
            </p>
            
            <!-- Navigation dots (visible uniquement sur mobile) -->
            <div class="flex justify-center space-x-2 mb-8 md:hidden">
                <button class="carousel-dot active w-3 h-3 bg-zest-500 rounded-full transition-all" data-slide="0"></button>
                <button class="carousel-dot w-3 h-3 bg-gray-300 rounded-full transition-all" data-slide="1"></button>
                <button class="carousel-dot w-3 h-3 bg-gray-300 rounded-full transition-all" data-slide="2"></button>
                <button class="carousel-dot w-3 h-3 bg-gray-300 rounded-full transition-all" data-slide="3"></button>
            </div>
        </div>

        <!-- Container -->
        <div class="relative">
            <!-- Desktop Grid / Mobile Carousel -->
            <div id="carousel-wrapper" class="md:grid md:grid-cols-3 md:gap-8 flex transition-transform duration-500 ease-in-out">
                <!-- Artisans -->
                <div class="metier-card text-center p-8 bg-blue-50 rounded-2xl hover:bg-blue-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">üîß</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Plombiers</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion interventions urgences/RDV</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Devis tuyauterie avec calculs auto</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Stock raccords et mat√©riaux</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi chantiers et SAV</li>
                    </ul>
                </div>

                <!-- √âlectricien -->
                <div class="metier-card text-center p-8 bg-yellow-50 rounded-2xl hover:bg-yellow-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">‚ö°</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">√âlectriciens</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning interventions/installations</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Devis conformit√© normes NF</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion certificats Consuel</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi tableaux √©lectriques</li>
                    </ul>
                </div>

                <!-- Menuisier -->
                <div class="metier-card text-center p-8 bg-amber-50 rounded-2xl hover:bg-amber-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">ü™ö</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Menuisiers</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Projets sur-mesure avec plans</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Calculs volume bois automatique</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi commandes et livraisons</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion atelier et pose</li>
                    </ul>
                </div>

                <!-- Agent Immobilier -->
                <div class="metier-card text-center p-8 bg-emerald-50 rounded-2xl hover:bg-emerald-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">üè†</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Agents Immobiliers</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Base vendeurs/acqu√©reurs</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Fichier biens avec photos</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi mandats et commissions</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Calculs plus-values auto</li>
                    </ul>
                </div>

                <!-- N√©gociateur -->
                <div class="metier-card text-center p-8 bg-teal-50 rounded-2xl hover:bg-teal-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">ü§ù</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">N√©gociateurs</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Pipeline n√©gociations avanc√©</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi visites et feedbacks</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Matching automatique biens</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Relances prospects qualifi√©s</li>
                    </ul>
                </div>

                <!-- Syndic -->
                <div class="metier-card text-center p-8 bg-cyan-50 rounded-2xl hover:bg-cyan-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">üè¢</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Syndics</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion copropri√©t√©s multiples</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi assembl√©es g√©n√©rales</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Incidents et travaux</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Budgets pr√©visionnels</li>
                    </ul>
                </div>

                <!-- Consultant -->
                <div class="metier-card text-center p-8 bg-purple-50 rounded-2xl hover:bg-purple-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">üíº</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Consultants</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion projets et missions</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Facturation temps pass√©</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi rentabilit√© par client</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Pipeline commercial avanc√©</li>
                    </ul>
                </div>

                <!-- Coach -->
                <div class="metier-card text-center p-8 bg-rose-50 rounded-2xl hover:bg-rose-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">üéØ</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Coachs</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi parcours clients individuels</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning s√©ances et packages</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Objectifs et progression</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Relances motivation</li>
                    </ul>
                </div>

                <!-- Formateur -->
                <div class="metier-card text-center p-8 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all duration-300 transform hover:scale-105 md:w-full w-full flex-shrink-0">
                    <div class="text-6xl mb-6">üéì</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Formateurs</h3>
                    <ul class="text-sm text-gray-600 space-y-2 text-left">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion sessions et participants</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi certifications QUALIOPI</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> √âvaluations et satisfaction</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning formateurs multiples</li>
                    </ul>
                </div>
            </div>

            <!-- Navigation arrows (visible uniquement sur mobile) -->
            <button id="prevBtn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-300 z-10 md:hidden">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            
            <button id="nextBtn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-300 z-10 md:hidden">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
    </div>
</section>

<style>
    .gradient-text {
        background: linear-gradient(135deg, #f97316, #ea580c);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .metier-card {
        cursor: pointer;
        border: 2px solid transparent;
    }
        
    .carousel-dot.active {
        transform: scale(1.5);
    }
    
    @media (max-width: 768px) {
        #carousel-wrapper {
            display: flex;
            overflow-x: hidden;
            scroll-snap-type: x mandatory;
        }
        
        .metier-card {
            scroll-snap-align: center;
            min-width: 100%;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const wrapper = document.getElementById('carousel-wrapper');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const dots = document.querySelectorAll('.carousel-dot');
        const cards = document.querySelectorAll('.metier-card');
        
        if (!wrapper || !prevBtn || !nextBtn) return;
        
        let currentIndex = 0;
        const cardWidth = cards[0] instanceof HTMLElement ? cards[0].offsetWidth : 0;
        const totalCards = cards.length;
        
        const updateCarousel = () => {
            if (window.innerWidth >= 768) return; // Ne rien faire sur desktop
            
            wrapper.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
            
            // Mise √† jour des dots
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
        };
        
        const nextSlide = () => {
            if (window.innerWidth >= 768) return; // Ne rien faire sur desktop
            currentIndex = (currentIndex + 1) % totalCards;
            updateCarousel();
        };
        
        const prevSlide = () => {
            if (window.innerWidth >= 768) return; // Ne rien faire sur desktop
            currentIndex = (currentIndex - 1 + totalCards) % totalCards;
            updateCarousel();
        };
        
        // Event listeners
        nextBtn.addEventListener('click', nextSlide);
        prevBtn.addEventListener('click', prevSlide);
        
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                if (window.innerWidth >= 768) return; // Ne rien faire sur desktop
                currentIndex = index;
                updateCarousel();
            });
        });
        
        // Auto-advance
        let autoAdvanceInterval = setInterval(nextSlide, 5000);
        
        // Pause auto-advance on hover
        wrapper.addEventListener('mouseenter', () => {
            clearInterval(autoAdvanceInterval);
        });
        
        wrapper.addEventListener('mouseleave', () => {
            autoAdvanceInterval = setInterval(nextSlide, 5000);
        });
        
        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768) {
                wrapper.style.transform = 'none';
            } else {
                updateCarousel();
            }
        });
        
        // Initial setup
        updateCarousel();
    });

    // RDV booking function (to be connected to your calendar)
    function bookMeeting() {
        window.open('https://calendar.app.google/GAuyVQfSgfuaZ6wL7', '_blank');
    }
</script>