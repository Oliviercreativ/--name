---
// src/components/MetiersCarousel.astro
// Composant carousel pour la section m√©tiers
---

<section id="metiers" class="bg-white py-20 lg:py-32">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                Adapt√© √† <span class="gradient-text">votre m√©tier</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
                Templates sp√©cialis√©s avec fonctionnalit√©s m√©tier int√©gr√©es
            </p>
            
            <!-- Navigation dots -->
            <div class="flex justify-center space-x-2 mb-8">
                <button class="carousel-dot active w-3 h-3 bg-zest-500 rounded-full transition-all" data-slide="0"></button>
                <button class="carousel-dot w-3 h-3 bg-gray-300 rounded-full transition-all" data-slide="1"></button>
                <button class="carousel-dot w-3 h-3 bg-gray-300 rounded-full transition-all" data-slide="2"></button>
                <button class="carousel-dot w-3 h-3 bg-gray-300 rounded-full transition-all" data-slide="3"></button>
            </div>
        </div>

        <!-- Carousel Container -->
        <div class="relative overflow-hidden">
            <!-- Carousel wrapper -->
            <div id="carousel-wrapper" class="flex transition-transform duration-500 ease-in-out">
                
                <!-- Slide 1: Artisans -->
                <div class="carousel-slide w-full flex-shrink-0">
                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Plombier -->
                        <div class="metier-card text-center p-8 bg-blue-50 rounded-2xl hover:bg-blue-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üîß</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Plombiers</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion interventions urgences/RDV</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Devis tuyauterie avec calculs auto</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Stock raccords et mat√©riaux</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi chantiers et SAV</li>
                            </ul>
                        </div>

                        <!-- √âlectricien -->
                        <div class="metier-card text-center p-8 bg-yellow-50 rounded-2xl hover:bg-yellow-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">‚ö°</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">√âlectriciens</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning interventions/installations</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Devis conformit√© normes NF</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion certificats Consuel</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi tableaux √©lectriques</li>
                            </ul>
                        </div>

                        <!-- Menuisier -->
                        <div class="metier-card text-center p-8 bg-amber-50 rounded-2xl hover:bg-amber-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">ü™ö</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Menuisiers</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Projets sur-mesure avec plans</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Calculs volume bois automatique</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi commandes et livraisons</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion atelier et pose</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Slide 2: Immobilier -->
                <div class="carousel-slide w-full flex-shrink-0">
                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Agent Immobilier -->
                        <div class="metier-card text-center p-8 bg-emerald-50 rounded-2xl hover:bg-emerald-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üè†</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Agents Immobiliers</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Base vendeurs/acqu√©reurs</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Fichier biens avec photos</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi mandats et commissions</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Calculs plus-values auto</li>
                            </ul>
                        </div>

                        <!-- N√©gociateur -->
                        <div class="metier-card text-center p-8 bg-teal-50 rounded-2xl hover:bg-teal-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">ü§ù</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">N√©gociateurs</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Pipeline n√©gociations avanc√©</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi visites et feedbacks</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Matching automatique biens</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Relances prospects qualifi√©s</li>
                            </ul>
                        </div>

                        <!-- Syndic -->
                        <div class="metier-card text-center p-8 bg-cyan-50 rounded-2xl hover:bg-cyan-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üè¢</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Syndics</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion copropri√©t√©s multiples</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi assembl√©es g√©n√©rales</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Incidents et travaux</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Budgets pr√©visionnels</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Slide 3: Services -->
                <div class="carousel-slide w-full flex-shrink-0">
                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Consultant -->
                        <div class="metier-card text-center p-8 bg-purple-50 rounded-2xl hover:bg-purple-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üíº</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Consultants</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion projets et missions</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Facturation temps pass√©</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi rentabilit√© par client</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Pipeline commercial avanc√©</li>
                            </ul>
                        </div>

                        <!-- Coach -->
                        <div class="metier-card text-center p-8 bg-rose-50 rounded-2xl hover:bg-rose-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üéØ</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Coachs</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi parcours clients individuels</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning s√©ances et packages</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Objectifs et progression</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Relances motivation</li>
                            </ul>
                        </div>

                        <!-- Formateur -->
                        <div class="metier-card text-center p-8 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üéì</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Formateurs</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion sessions et participants</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi certifications QUALIOPI</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> √âvaluations et satisfaction</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning formateurs multiples</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Slide 4: Autres m√©tiers -->
                <div class="carousel-slide w-full flex-shrink-0">
                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Th√©rapeute -->
                        <div class="metier-card text-center p-8 bg-green-50 rounded-2xl hover:bg-green-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üåø</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Th√©rapeutes</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Dossiers patients confidentiels</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Planning consultations</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi traitements et √©volution</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Relances pr√©ventives</li>
                            </ul>
                        </div>

                        <!-- Photographe -->
                        <div class="metier-card text-center p-8 bg-pink-50 rounded-2xl hover:bg-pink-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üì∏</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Photographes</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion shootings et √©v√©nements</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Livraison galeries clients</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Suivi retouches et validations</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Packages et options</li>
                            </ul>
                        </div>

                        <!-- Commer√ßant -->
                        <div class="metier-card text-center p-8 bg-orange-50 rounded-2xl hover:bg-orange-100 transition-all duration-300 transform hover:scale-105">
                            <div class="text-6xl mb-6">üõçÔ∏è</div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Commer√ßants</h3>
                            <ul class="text-sm text-gray-600 space-y-2 text-left">
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Base clients et historique achats</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Gestion fid√©lit√© et promotions</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Stock et r√©assorts</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">‚Ä¢</span> Analyse ventes saisonni√®res</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation arrows -->
            <button id="prevBtn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-300 z-10">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            
            <button id="nextBtn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-300 z-10">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>

        <!-- CTA -->
        <div class="text-center mt-16">
            <p class="text-gray-600 mb-6">
                <strong>Votre m√©tier n'est pas list√© ?</strong> On cr√©e votre template personnalis√© !
            </p>
            <button onclick="bookMeeting()" class="bg-zest-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-zest-600 transition-colors">
                Voir si votre m√©tier est support√© ‚Üí
            </button>
        </div>
    </div>
</section>

<style>
    .gradient-text {
        background: linear-gradient(135deg, #f97316, #ea580c);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .metier-card {
        cursor: pointer;
        border: 2px solid transparent;
    }
    
    .metier-card:hover {
        border-color: #f97316;
        box-shadow: 0 10px 25px rgba(249, 115, 22, 0.15);
    }
    
    .carousel-dot.active {
        transform: scale(1.5);
    }
    
    /* Animation des cards au changement de slide */
    .carousel-slide {
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
    }
    
    @media (max-width: 768px) {
        .carousel-slide {
            padding: 0 1rem;
        }
        
        .metier-card {
            margin-bottom: 1rem;
        }
    }
</style>

<script>
    // Carousel functionality
    let currentSlide = 0;
    const totalSlides = 4;
    const carousel = document.getElementById('carousel-wrapper');
    const dots = document.querySelectorAll('.carousel-dot');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function updateCarousel() {
        const translateX = -currentSlide * 100;
        carousel.style.transform = `translateX(${translateX}%)`;
        
        // Update dots
        dots.forEach((dot, index) => {
            if (index === currentSlide) {
                dot.classList.add('active');
                dot.classList.remove('bg-gray-300');
                dot.classList.add('bg-zest-500');
            } else {
                dot.classList.remove('active');
                dot.classList.remove('bg-zest-500');
                dot.classList.add('bg-gray-300');
            }
        });
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateCarousel();
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateCarousel();
    }

    function goToSlide(slideIndex) {
        currentSlide = slideIndex;
        updateCarousel();
    }

    // Event listeners
    nextBtn.addEventListener('click', nextSlide);
    prevBtn.addEventListener('click', prevSlide);

    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => goToSlide(index));
    });

    // Auto-advance every 8 seconds
    setInterval(nextSlide, 8000);

    // Touch/swipe support for mobile
    let startX = 0;
    let endX = 0;

    carousel.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
    });

    carousel.addEventListener('touchend', (e) => {
        endX = e.changedTouches[0].clientX;
        handleSwipe();
    });

    function handleSwipe() {
        const swipeThreshold = 50;
        const diff = startX - endX;
        
        if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0) {
                nextSlide(); // Swipe left = next
            } else {
                prevSlide(); // Swipe right = previous
            }
        }
    }

    // Pause auto-advance on hover
    const carouselSection = document.getElementById('metiers');
    carouselSection.addEventListener('mouseenter', () => {
        clearInterval(autoAdvance);
    });

    let autoAdvance = setInterval(nextSlide, 8000);
    carouselSection.addEventListener('mouseleave', () => {
        autoAdvance = setInterval(nextSlide, 8000);
    });

    // RDV booking function (to be connected to your calendar)
    function bookMeeting() {
        window.open('https://calendar.app.google/GAuyVQfSgfuaZ6wL7', '_blank');
    }
</script>